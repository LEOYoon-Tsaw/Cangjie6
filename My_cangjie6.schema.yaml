# Rime schema
# encoding: utf-8

schema:
  schema_id: cangjie6
  name: è’¼é ¡æª¢å­—æ³•
  author:
    - æœ±é‚¦å¾©å…ˆç”Ÿ
    - æ²ˆç´…è“®å¥³å£«
  description: |
    ç¬¬å…­ä»£å€‰é ¡è¼¸å…¥æ³•
    ç¢¼è¡¨ç”±é›ªé½‹ã€æƒœç·£å’Œcrazy4uæ•´ç†
  version: 0.19
  dependencies: [ luna_pinyin, jyutping, zyenpheng, emoji ]

switches:
  - name: ascii_mode
    reset: 0
    states: [ ä¸­æ–‡, è¥¿æ–‡ ]
  - name: full_shape
    reset: 0
    states: [ åŠè§’, å…¨è§’ ]
  - name: simplification
    reset: 0
    states: [ æ¼¢å­—, ç°¡å­— ]
  - name: emoji_segestion
    reset: 1
    states: [ "ğŸˆšï¸ï¸\uFE0E", ğŸˆ¶ï¸ï¸ ]
  - name: extended_charset
    reset: 0
    states: [ é€šç”¨, å¢å»£ ]
  - name: ascii_punct
    reset: 0
    states: [ å¥è®€, æ¨™é» ]

engine:
  processors:
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - affix_segmentor@pinyin
    - affix_segmentor@jyutping
    - affix_segmentor@pinyin_lookup
    - affix_segmentor@jyutping_lookup
    - affix_segmentor@reverse_lookup
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - script_translator
    - table_translator@custom_phrase
    - script_translator@pinyin
    - script_translator@jyutping
    - script_translator@pinyin_lookup
    - script_translator@jyutping_lookup
  filters:
    - simplifier@zh_simp
    - simplifier@emoji_switch
    - uniquifier
    - charset_filter@cjk_filter
    - reverse_lookup_filter@middle_chinese
    - reverse_lookup_filter@pinyin_reverse_lookup
    - reverse_lookup_filter@jyutping_reverse_lookup

zh_simp:
  opencc_config: t2s.json
  tags: [ pinyin, jyutping, abc ]
  tips: char

emoji_switch:
  opencc_config: emoji.json
  option_name: emoji_segestion
  tags: [ pinyin, jyutping, abc ]
  tips: all

cjk_filter:
  tags: [ abc ]

speller:
  alphabet: zyxwvutsrqponmlkjihgfedcba
  delimiter: " "

translator:
  dictionary: &dict
    cangjie6
  enable_completion: true
  enable_sentence: true
  sentence_over_completion: true
  soft_cursor: true
  preedit_format:
    - xform/^([a-z ]*)$/$1\t \U$1\E/
    - xlit|ABCDEFGHIJKLMNOPQRSTUVWXYZ|æ—¥æœˆé‡‘æœ¨æ°´ç«åœŸç«¹æˆˆåå¤§ä¸­ä¸€å¼“äººå¿ƒæ‰‹å£å°¸å»¿å±±å¥³ç”°æ­¢åœç‰‡|
  comment_format:
    - xlit|abcdefghijklmnopqrstuvwxyz~|æ—¥æœˆé‡‘æœ¨æ°´ç«åœŸç«¹æˆˆåå¤§ä¸­ä¸€å¼“äººå¿ƒæ‰‹å£å°¸å»¿å±±å¥³ç”°æ­¢åœç‰‡ãƒ»|
  initial_quality: 0.75

custom_phrase:
  dictionary: ""
  user_dict: custom_phrase
  db_class: tabledb
  enable_sentence: false
  enable_completion: false
  initial_quality: 1

pinyin:
  tag: pinyin
  dictionary: luna_pinyin
  prefix: P
  suffix: ;
  preedit_format: &pinyin
    - xform/v/Ã¼/
  tips: ã€æ¼¢æ‹¼ã€‘
  closing_tips: ã€è’¼é ¡ã€‘
  initial_quality: 0.2

jyutping:
  tag: jyutping
  dictionary: jyutping
  prefix: J
  suffix: ;
  tips: ã€ç²µæ‹¼ã€‘
  closing_tips: ã€è’¼é ¡ã€‘
  initial_quality: 0.1

abc_segmentor:
#  extra_tags: [ pinyin, jyutping ]

reverse_lookup:
  tag: reverse_lookup
  prefix: "`"
  suffix: ;
  tips: ã€åæŸ¥ã€‘
  closing_tips: ã€è’¼é ¡ã€‘
  extra_tags: [ pinyin_lookup, jyutping_lookup ]

pinyin_lookup:
  tag: pinyin_lookup
  prefix: "`P"
  suffix: ;
  dictionary: luna_pinyin
  preedit_format: *pinyin
  tips: ã€æ¼¢æ‹¼åæŸ¥ã€‘
  closing_tips: ã€è’¼é ¡ã€‘
  initial_quality: 1

jyutping_lookup:
  tag: jyutping_lookup
  prefix: "`J"
  suffix: ;
  dictionary: jyutping
  tips: ã€ç²µæ‹¼åæŸ¥ã€‘
  closing_tips: ã€è’¼é ¡ã€‘
  initial_quality: 0.6

pinyin_reverse_lookup:
  tags: [ pinyin_lookup ]
  overwrite_comment: true
  dictionary: *dict
  comment_format: &comment
    - xform/$/ã€•/
    - xform/^/ã€”/
    - xlit|abcdefghijklmnopqrstuvwxyz |æ—¥æœˆé‡‘æœ¨æ°´ç«åœŸç«¹æˆˆåå¤§ä¸­ä¸€å¼“äººå¿ƒæ‰‹å£å°¸å»¿å±±å¥³ç”°æ­¢åœç‰‡ã€|

jyutping_reverse_lookup:
  tags: [ jyutping_lookup ]
  overwrite_comment: true
  dictionary: *dict
  comment_format: *comment

middle_chinese:
  tags: [ pinyin, jyutping, abc ]
  dictionary: zyenpheng
  overwrite_comment: true
  comment_format:
    - xform/ /\x03 \x01/
    - xform/$/\x03/
    - xform/^/\x01/

    - xform/ng/Å‹/
    - xform/k\x03/Å‹q\x03/
    - xform/t\x03/nq\x03/
    - xform/p\x03/mq\x03/
    - xform/(\x01(?:th?|ch?|zs?|[dns]))r(?=[^iy'])/$1r'r/
    - xform/(\x01(?:ph?|kh?|gh?|[bmhqjiy]|Å‹)[iy])eÅ‹/$1Ã¦Å‹/
    - xform/j(?![iy'])/ji/
    - xform/(\x01(?:ch?|zs?|[sn])?[jl])(?=([iy]e([umn]|Å‹)?|i[imn]|yn)[dxhq]?)/$1'j/
    - xform/(\x01(?:ch?|zs?|s))(?=(?:[iy]e(?:[umn]|Å‹)?|i[imn]|yn)[dxhq]?)/$1'j/
    - xform/(\x01(?:ch?|zs?|s)rj?i)n/$1É¿n/
    - xform/(\x01)(?!ph?|kh?|gh?|Å‹|[bmhqjiy])([^aeiouy]*y)n([xhq]?\x03)/$1$2É¿n$3/
    - xform/(\x01)([^aeiouy]*jy)n([xhq]?\x03)/$1$2É¿n$3/
    - xform/(\x01)(?!kh?|g|Å‹)([^aeioux]*)ia([xhq]?\x03)/$1$2'ria$3/

    - xform/([^xhdq])\x03/$1w\x03/
    - xform/(\x01[^\x01\x03]+)([whxq])\x03((?:\s\x01[^\x01\x03]+\x03)*)\s\1([whxq])\x03((?:\s\x01[^\x01\x03]+\x03)*)\s\1([whxq]\x03)/$1$2$4$6$3$5/
    - xform/(\x01[^\x01\x03]+)([whxq])\x03((?:\s\x01[^\x01\x03]+\x03)*)\s\1([whxq]\x03)/$1$2$4$3/

#    - xform/\x01ph(?=y(o[in]?|a[mnd]|[au]Å‹)|iu(Å‹)?)/\x01Læ•·\x02/
#    - xform/\x01p(?=y(o[in]?|a[mnd]|[au]Å‹)|iu(Å‹)?)/\x01Lé\x02/
#    - xform/\x01b(?=y(o[in]?|a[mnd]|[au]Å‹)|iu(Å‹)?)/\x01Lå¥‰\x02/
#    - xform/\x01m(?=y(o[in]?|a[mnd]|[au]Å‹))/\x01Lå¾®\x02/
    - xform/\x01ph/\x01Læ»‚\x02/
    - xform/\x01p/\x01Lå¹«\x02/
    - xform/\x01b/\x01Lä¸¦\x02/
    - xform/\x01m/\x01Læ˜\x02/
    - xform/\x01thr/\x01å¾¹\x02/
    - xform/\x01tr/\x01çŸ¥\x02/
    - xform/\x01dr/\x01æ¾„\x02/
    - xform/\x01nr/\x01å­ƒ\x02/
    - xform/\x01nj/\x01æ—¥\x02/
    - xform/\x01th/\x01é€\x02/
    - xform/\x01t/\x01ç«¯\x02/
    - xform/\x01d/\x01å®š\x02/
    - xform/\x01n/\x01æ³¥\x02/
    - xform/\x01chr/\x01åˆ\x02/
    - xform/\x01cr/\x01èŠ\x02/
    - xform/\x01zsr/\x01ä¿Ÿ\x02/
    - xform/\x01zr/\x01å´‡\x02/
    - xform/\x01sr/\x01ç”Ÿ\x02/
    - xform/\x01chj/\x01æ˜Œ\x02/
    - xform/\x01cj/\x01ç« \x02/
    - xform/\x01zsj/\x01èˆ¹\x02/
    - xform/\x01zj/\x01å¸¸\x02/
    - xform/\x01sj/\x01æ›¸\x02/
    - xform/\x01ch/\x01æ¸…\x02/
    - xform/\x01c/\x01ç²¾\x02/
    - xform/\x01zs/\x01é‚ª\x02/
    - xform/\x01z/\x01å¾\x02/
    - xform/\x01s/\x01å¿ƒ\x02/
    - xform/\x01kh/\x01è°¿\x02/
    - xform/\x01k/\x01è¦‹\x02/
    - xform/\x01gh/\x01åŒ£\x02/
    - xform/\x01g/\x01ç¾£\x02/
    - xform/\x01Å‹/\x01ç–‘\x02/
    - xform/\x01h/\x01æ›‰\x02/
    - xform/\x01q/\x01å½±\x02/
    - xform/\x01([iy])/\x01äº‘\x02$1/
    - xform/\x01j/\x01ä»¥\x02/
    - xform/\x01l/\x01ä¾†\x02/
    - xform/'//

    - xform/\x01(L?)([^\x00-\x7f]{3})\x02([^\x01\x02\x03wxhq]+)([wxhq]*)\x03\s((?:\x01[^\x01\x03]+\x03\s)*)\x01\1([^\x00-\x7f]{3})\x02\3([wxhq]*)\x03\s((?:\x01[^\x01\x03]+\x03\s)*)\x01\1([^\x00-\x7f]{3})\x02\3([wxhq]*\x03)/\x01$1$2ï¼$6ï¼$9\x02$3$4ï¼$7ï¼$10 $5$8/
    - xform/\x01(L?)([^\x00-\x7f]{3})\x02([^\x01\x02\x03wxhq]+)([wxhq]*)\x03\s((?:\x01[^\x01\x03]+\x03\s)*)\x01\1([^\x00-\x7f]{3})\x02\3([wxhq]*\x03)\s?/\x01$1$2ï¼$6\x02$3$4ï¼$7 $5/
    - xform/\x01(L?)([^\x00-\x7f]{3})\x02([^\x01\x02\x03wxhq]+)([wxhq]*)\x03\s((?:\x01[^\x01\x03]+\x03\s)*)\x01\1([^\x00-\x7f]{3})\x02\3([wxhq]*\x03)\s?/\x01$1$2ï¼$6\x02$3$4ï¼$7 $5/
    - xform/ï¼\x03/\x03/
    - xform/([xhq]+)w/w$1/
    - xform/(w?)([hq]+)x/$1x$2/
    - xform/q(h)/$1q/
    - xform/\x02([^\x01\x02\x03wxhq]+?)([wxhq]+)ï¼\2ï¼\2\x03/\x02$1$2\x03/
    - xform/\x02([^\x01\x02\x03wxhq]+?)([wxhq]+)ï¼\2\x03/\x02$1$2\x03/

    - xform/\x02(i?)uÅ‹((?:[wxhq]|ï¼)*\x03)/\x02$1æ±$2/
    - xform/\x02(y)uÅ‹((?:[wxhq]|ï¼)*\x03)/\x02$1é˜$2/
    - xform/\x02(u)uÅ‹((?:[wxhq]|ï¼)*\x03)/\x02$1å†¬$2/
    - xform/\x02(r)uÅ‹((?:[wxhq]|ï¼)*\x03)/\x02$1æ±Ÿ$2/
    - xform/\x02([iy])aÅ‹((?:[wxhq]|ï¼)*\x03)/\x02$1oé™½$2/
    - xform/\x02(u?)aÅ‹((?:[wxhq]|ï¼)*\x03)/\x02$1oå”$2/
    - xform/\x02(ru?)aÅ‹((?:[wxhq]|ï¼)*\x03)/\x02$1oåºš$2/
    - xform/\x02([iy])Ã¦Å‹((?:[wxhq]|ï¼)*\x03)/\x02É¨$1oåºš$2/
    - xform/\x02(ru?)eÅ‹((?:[wxhq]|ï¼)*\x03)/\x02$1oè€•$2/
    - xform/\x02j?([iy])eÅ‹((?:[wxhq]|ï¼)*\x03)/\x02jÉ¨$1oæ¸…$2/
    - xform/\x02(u?e)Å‹((?:[wxhq]|ï¼)*\x03)/\x02$1oé’$2/
    - xform/\x02([iy])Å‹((?:[wxhq]|ï¼)*\x03)/\x02$1oè’¸$2/
    - xform/\x02(u?)oÅ‹((?:[wxhq]|ï¼)*\x03)/\x02$1oç™»$2/

    - xform/\x02(j?)(y)É¿n((?:[wxhq]|ï¼)*\x03)/\x02$1É¨$2oè«„$3/
    - xform/\x02(j?)(i)É¿n((?:[wxhq]|ï¼)*\x03)/\x02$1É¨$2oè‡»$3/
    - xform/\x02(j?)([iy])n((?:[wxhq]|ï¼)*\x03)/\x02$1É¨$2oçœ$3/
    - xform/\x02(i)on((?:[wxhq]|ï¼)*\x03)/\x02$1oæ¬£$2/
    - xform/\x02(u)on((?:[wxhq]|ï¼)*\x03)/\x02$1oé­‚$2/
    - xform/\x02on((?:[wxhq]|ï¼)*\x03)/\x02oç—•$1/
    - xform/\x02(y)on((?:[wxhq]|ï¼)*\x03)/\x02$1oæ–‡$2/
    - xform/\x02(u)an((?:[wxhq]|ï¼)*\x03)/\x02$1oæ¡“$2/
    - xform/\x02([iy])an((?:[wxhq]|ï¼)*\x03)/\x02$1oå…ƒ$2/
    - xform/\x02(ru?)an((?:[wxhq]|ï¼)*\x03)/\x02$1oåˆª$2/
    - xform/\x02an((?:[wxhq]|ï¼)*\x03)/\x02oå¯’$1/
    - xform/\x02(ru?)en((?:[wxhq]|ï¼)*\x03)/\x02$1oå±±$2/
    - xform/\x02(j?)([iy])en((?:[wxhq]|ï¼)*\x03)/\x02$1É¨$2oä»™$3/
    - xform/\x02(u?e)n((?:[wxhq]|ï¼)*\x03)/\x02$1oå…ˆ$2/

    - xform/\x02(j?)(i)m((?:[wxhq]|ï¼)*\x03)/\x02$1É¨$2oä¾µ$3/
    - xform/\x02(i)am((?:[wxhq]|ï¼)*\x03)/\x02$1oåš´$2/
    - xform/\x02(y)am((?:[wxhq]|ï¼)*\x03)/\x02$1oå‡¡$2/
    - xform/\x02(r)am((?:[wxhq]|ï¼)*\x03)/\x02$1oéŠœ$2/
    - xform/\x02(r)em((?:[wxhq]|ï¼)*\x03)/\x02$1oå’¸$2/
    - xform/\x02am((?:[wxhq]|ï¼)*\x03)/\x02oè«‡$1/
    - xform/\x02(j?)(i)em((?:[wxhq]|ï¼)*\x03)/\x02$1É¨$2oé¹½$3/
    - xform/\x02(e)m((?:[wxhq]|ï¼)*\x03)/\x02$1oæ·»$2/
    - xform/\x02om((?:[wxhq]|ï¼)*\x03)/\x02oè¦ƒ$1/

    - xform/\x02(r)au((?:[wxh]|ï¼)*\x03)/\x02$1è‚´$2/
    - xform/\x02au((?:[wxh]|ï¼)*\x03)/\x02è±ª$1/
    - xform/\x02(j?)(i)eu((?:[wxh]|ï¼)*\x03)/\x02$1É¨$2å®µ$3/
    - xform/\x02(e)u((?:[wxh]|ï¼)*\x03)/\x02$1è•­$2/
    - xform/\x02(i)u((?:[wxh]|ï¼)*\x03)/\x02$1å°¤$2/
    - xform/\x02u((?:[wxh]|ï¼)*\x03)/\x02ä¾¯$1/
    - xform/\x02(y)((?:[wxh]|ï¼)*\x03)/\x02$1å¹½$2/

    - xform/\x02(j?)([iy])e((?:[wxh]|ï¼)*\x03)/\x02$1É¨$2oæ”¯$3/
    - xform/\x02(j?)([iy])i((?:[wxh]|ï¼)*\x03)/\x02$1É¨$2oè„‚$3/
    - xform/\x02i((?:[wxh]|ï¼)*\x03)/\x02ioä¹‹$1/
    - xform/\x02([iy])oi((?:[wxh]|ï¼)*\x03)/\x02$1oå¾®$2/
    - xform/\x02([iy])a((?:d|ï¼)+\x03)/\x02$1oå»¢$2/
    - xform/\x02(ru?)a((?:d|ï¼)+\x03)/\x02$1oå¤¬$2/
    - xform/\x02(u?)a((?:d|ï¼)+\x03)/\x02$1oæ³°$2/
    - xform/\x02(j?)([iy])e((?:d|ï¼)+\x03)/\x02$1É¨$2oç¥­$3/
    - xform/\x02(ru?)e((?:[wxh]|ï¼)*\x03)/\x02$1oä½³$2/
    - xform/\x02(ru?)ai((?:[wxh]|ï¼)*\x03)/\x02$1oçš†$2/
    - xform/\x02(u?e)((?:[wxh]|ï¼)*\x03)/\x02$1oé½Š$2/
    - xform/\x02i?(u)ai((?:[wxh]|ï¼)*\x03)/\x02$1oç°$2/
    - xform/\x02ai((?:[wxh]|ï¼)*\x03)/\x02oå’$1/

    - xform/\x02([uiy])a((?:[wxh]|ï¼)*\x03)/\x02$1oæˆˆ$2/
    - xform/\x02a((?:[wxh]|ï¼)*\x03)/\x02oæ­Œ$1/
    - xform/\x02j?(r[ui]?)a((?:[wxh]|ï¼)*\x03)/\x02$1oéº»$2/
    - xform/\x02(i)o((?:[wxh]|ï¼)*\x03)/\x02$1é­š$2/
    - xform/\x02(y)o((?:[wxh]|ï¼)*\x03)/\x02$1è™$2/
    - xform/\x02o((?:[wxh]|ï¼)*\x03)/\x02æ¨¡$1/

    - xform/d/h/
    - xform/(\x01[^\x01\x03wxhq]+)([whxq]+)((?:ï¼[whxq]+)*)\x03/$1ã€‘$2$3/

    - xform/\x01(L?)((?:[^\x00-\x7f]{3}|ï¼)+)\x02(j?É¨)([iy])(o?)([^\x00-\x7f]{3})/ã€–$2ã€—é‡ç´$3ç­‰\x01$1$5$4\x03ã€$6/
    - xform/\x01(L?)((?:[^\x00-\x7f]{3}|ï¼)+)\x02(u?)e(o?)([^\x00-\x7f]{3})/ã€–$2ã€—å››ç­‰\x01$1$4$3\x03ã€$5/
    - xform/\x01(L?)((?:[^\x00-\x7f]{3}|ï¼)+)\x02r(u?)(o?)([^\x00-\x7f]{3})/ã€–$2ã€—äºŒç­‰\x01$1$4$3\x03ã€$5/
    - xform/\x01(L?)((?:[^\x00-\x7f]{3}|ï¼)+)\x02r?([iy])(o?)([^\x00-\x7f]{3})/ã€–$2ã€—ä¸‰ç­‰\x01$1$4$3\x03ã€$5/
    - xform/\x01(L?)((?:[^\x00-\x7f]{3}|ï¼)+)\x02(u?)(o?)([^\x00-\x7f]{3})/ã€–$2ã€—ä¸€ç­‰\x01$1$4$3\x03ã€$5/
    - xform/jÉ¨/å››/
    - xform/É¨/ä¸‰/
    - xform/\x01(?!L)o[uy]\x03/åˆ/
    - xform/\x01(?!L)oi?\x03/é–‹/
    - xform/\x01L?[a-z]*\x03//

    - xform/(\s|^)([^\s]+)ã€([^\x00-\x7f]{3})ã€‘([wxhq]+)\s((?:[^\s]+\s)*)\2ã€([^\x00-\x7f]{3})ã€‘([wxhq]+)(\s|$)/$1$2ã€$3ï¼$6ã€‘$4ï¼$7 $5$8/
    - xform/(ã€‘)([wxhq]+)ï¼\2(\s)/$1$2$3/

    - xlit|wxhq|å¹³ä¸Šå»å…¥|

key_binder:
  import_preset: default

punctuator:
  import_preset: symbols_leo

recognizer:
  import_preset: default
  patterns:
    email: ^[a-z][-_.0-9a-z]*@.*$
    url: ^(www[.]|https?:|ftp[.:]|mailto:|file:).*$|^[a-z]+[.].+$
    reverse_lookup: "`[a-z]*;?$"
    pinyin_lookup: "`P[a-z]*;?$"
    jyutping_lookup: "`J[a-z]*;?$"
    pinyin: (?<![`A-Z])P[a-z']*;?$
    jyutping: (?<![`A-Z])J[a-z']*;?$
    punct: "^z([a-z]+|[0-9])$"
    upper_case: ^([A-IK-OQ-Z][a-zA-Z0-9]*|[JP][A-Z0-9]*)$
